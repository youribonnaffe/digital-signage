<!DOCTYPE html>
<html lang="en">
<head>
    <title></title>
    <meta charset="utf-8">
    <style></style>
</head>
<body>
<div id="clients">

</div>
<script src="/socket.io/socket.io.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        var socket = io();

        socket.emit('admin', '');
        socket.on('clients', function (msg) {
            console.log(msg);
        });

        socket.on('joined', function (msg) {
            console.log(msg);

            const frag = document.createDocumentFragment();

            const form = document.createElement("form");
            form.action = "";
            frag.appendChild(form);

            const label = document.createElement("label");
            label.for = msg;
            label.innerHTML = "URL for " + msg;
            form.appendChild(label);

            const input = document.createElement("input");
            input.id = msg;
            input.className = 'url';
            form.appendChild(input);

            const button = document.createElement("button");
            button.innerHTML = "Display"
            form.appendChild(button);

            form.addEventListener('submit', function (e) {
                e.preventDefault();
                socket.emit('url', {
                    'name': msg,
                    'url': this.getElementsByClassName('url')[0].value
                });
            })

            document.getElementById('clients').appendChild(frag);
        });
    });
</script>
</body>
</html>